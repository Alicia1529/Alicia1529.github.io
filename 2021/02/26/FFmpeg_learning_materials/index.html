<!DOCTYPE html>
<html lang="en,zh-CN,default">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>FFmpeg learning materials and notes | Aliciaaa</title>



    <link rel="icon" href="/favicon_a.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Alicia&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/memo">Memo</a>
                
                    <a class="menu-item" href="/archives">Archives</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/resume">Resume</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Alicia&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/memo">Memo</a>
                
                    <a class="menu-item" href="/archives">Archives</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/resume">Resume</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>

        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>

<!-- <script zIndex="-2" src="js/canvas-nest.js"></script> -->
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">FFmpeg learning materials and notes</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Alicia Luo</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">February 26, 2021&nbsp;&nbsp;15:23:48</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/FFmpeg/">FFmpeg</a>
                            
                            
                        </span>
                    
                    <span class="post-view">         
                        <span id="busuanzi_container_page_pv">
                            Views: <a id="busuanzi_value_page_pv"></a>
                        </span> 
                    </span>

                </div>
            
        </header>

        <div class="post-content">
            <h3 id="FFmpeg-ä»‹ç»"><a href="#FFmpeg-ä»‹ç»" class="headerlink" title="FFmpeg ä»‹ç»"></a>FFmpeg ä»‹ç»</h3><p>FFmpeg is a free and open-source project consisting of a vast software suite of libraries and programs for handling video, audio, and other multimedia files and streams. At its core is the FFmpeg program itself, designed for command-line-based processing of video and audio files, and widely used for format transcoding, basic editing (trimming and concatenation), video scaling, video post-production effects, and standards compliance (SMPTE, ITU).</p>
<h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p>ä½¿ç”¨FFMPEGä½œä¸ºå†…æ ¸è§†é¢‘æ’­æ”¾å™¨ï¼šMplayerï¼Œffplayï¼Œå°„æ‰‹æ’­æ”¾å™¨ï¼Œæš´é£å½±éŸ³ï¼ŒKMPlayerï¼ŒQQå½±éŸ³â€¦<br>ä½¿ç”¨FFMPEGä½œä¸ºå†…æ ¸çš„Directshow Filterï¼šffdshowï¼Œlav filtersâ€¦<br>ä½¿ç”¨FFMPEGä½œä¸ºå†…æ ¸çš„è½¬ç å·¥å…·ï¼šffmpegï¼Œæ ¼å¼å·¥å‚â€¦<br>æŸ¥çœ‹å½±ç‰‡è¯¸å¦‚æ—¶é•¿ã€ç ç‡å¸§æ•°ç­‰ä¿¡æ¯<br>å¯¹è§†é¢‘è¿›è¡Œè½¬ç  video.mp4 video.avi<br>ä¿®æ”¹è§†é¢‘å°ºå¯¸ï¼Œåˆ†è¾¨ç‡ï¼Œå‹ç¼©<br>æŠ½å¸§</p>
<h3 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h3><ul>
<li><p>å®¹å™¨(Container)<br>å®¹å™¨å°±æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œæ¯”å¦‚flvï¼Œmkvç­‰ã€‚åŒ…å«ä¸‹é¢5ç§æµä»¥åŠæ–‡ä»¶å¤´ä¿¡æ¯ã€‚</p>
</li>
<li><p>æµ(Stream)<br>æ˜¯ä¸€ç§è§†é¢‘æ•°æ®ä¿¡æ¯çš„ä¼ è¾“æ–¹å¼ï¼Œ5ç§æµï¼šéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå­—å¹•ï¼Œé™„ä»¶ï¼Œæ•°æ®ã€‚</p>
</li>
<li><p>å¤ç”¨/è§£å¤ç”¨(mux/demux)<br>æŠŠä¸åŒçš„æµæŒ‰ç…§æŸç§å®¹å™¨çš„è§„åˆ™æ”¾å…¥å®¹å™¨ï¼Œè¿™ç§è¡Œä¸ºå«åšå¤ç”¨ï¼ˆmuxï¼‰<br>æŠŠä¸åŒçš„æµä»æŸç§å®¹å™¨ä¸­è§£æå‡ºæ¥ï¼Œè¿™ç§è¡Œä¸ºå«åšè§£å¤ç”¨(demux)</p>
</li>
<li><p>å¸§(Frame)<br>å¸§ä»£è¡¨ä¸€å¹…é™æ­¢çš„å›¾åƒï¼Œåˆ†ä¸ºIå¸§ï¼ŒPå¸§ï¼ŒBå¸§ã€‚</p>
</li>
<li><p>ç¼–è§£ç å™¨(Codec)<br>æ˜¯å¯¹è§†é¢‘è¿›è¡Œå‹ç¼©æˆ–è€…è§£å‹ç¼©ï¼ŒCODEC = COdeï¼ˆç¼–ç ï¼‰+ DECodeï¼ˆè§£ç ï¼‰</p>
</li>
</ul>
<h3 id="ffmpegçš„ç»„æˆ"><a href="#ffmpegçš„ç»„æˆ" class="headerlink" title="ffmpegçš„ç»„æˆ"></a>ffmpegçš„ç»„æˆ</h3><p>FFmpegæ¡†æ¶çš„åŸºæœ¬ç»„æˆåŒ…å«AVFormatã€AVCodecã€AVFilterã€AVDeviceã€AVUtilç­‰æ¨¡å—åº“ã€‚<br><img src="https://pic1.zhimg.com/v2-043d4b8d67fea6e8ef0da249de1eb5f5_1440w.jpg?source=172ae18b" alt="Alt text"></p>
<p>(source: <a href="https://zhuanlan.zhihu.com/p/37516093" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/37516093</a>)</p>
<p>1ï¼‰FFmpegçš„å°è£…æ¨¡å—AVFormat<br>AVFormatå®ç°äº†å¤šåª’ä½“é¢†åŸŸç»å¤§æ•°åª’ä½“å°è£…æ ¼å¼ï¼ŒåŒ…æ‹¬å°è£…å’Œè§£å°è£…ï¼Œå¦‚MP4ã€FLVã€KVã€ TSç­‰æ–‡ä»¶å°è£…æ ¼å¼ï¼ŒRTMPã€RTSPã€MMSã€HLSç­‰ç½‘ç»œåè®®å°è£…æ ¼å¼ã€‚FFmepgæ˜¯å¦æ”¯æŒæŸç§åª’ä½“å°è£…æ ¼å¼å–å†³äºç¼–è¯‘æ—¶æ˜¯å¦åŒ…å«äº†è¯¥æ ¼å¼çš„å°è£…åº“ã€‚</p>
<p>Libavformat (lavf) is a library for dealing with various media container formats. Its main two purposes are demuxing - i.e. splitting a media file into component streams, and the reverse process of muxing - writing supplied data in a specified container format. It also has an @ref lavf_io â€œI/O moduleâ€ which supports a number of protocols for accessing the data (e.g. file, tcp, http and others).</p>
<p>2ï¼‰FFmpegçš„ç¼–è§£ç æ¨¡å—AVCodec<br>AVCodecåŒ…æ‹¬å¤§å¤šæ•°å¸¸ç”¨çš„ç¼–è§£ç æ ¼å¼ï¼Œæ—¢æ”¯æŒç¼–ç ä¹Ÿæ”¯æŒè§£ç ã€‚é™¤äº†æ”¯æŒMPEG4ã€AACã€MJPEGç­‰è‡ªå¸¦çš„åª’ä½“æ ¼å¼ä¹Ÿæ”¯æŒH.264ï¼ˆx264ç¼–ç å™¨ï¼‰ã€H.265ï¼ˆX265ç¼–ç å™¨ï¼‰ã€MP3ï¼ˆlibMP3lameç¼–ç å™¨ï¼‰ã€‚</p>
<p>GOPå†…çš„å¸§åˆ†ä¸ºä¸‰ç§ï¼šIå¸§ã€Bå¸§å’ŒPå¸§ï¼Œå°±æ˜¯å›¾ä¸­çš„Iã€Bã€Pã€‚å…¶ä¸­Iå¸§åŒ…å«å®Œæ•´çš„å›¾åƒä¿¡æ¯å¹¶è¿›è¡Œå¸§å†…å‹ç¼©ï¼Œè€ŒBã€På¸§åªåŒ…å«å›¾åƒçš„ä¸€éƒ¨åˆ†ï¼Œå›¾åƒçš„å…¶ä»–éƒ¨åˆ†é€šè¿‡å’Œå…¶ä»–å›¾åƒè¿ç®—å¾—å‡ºã€‚ï¼ˆPå¸§å‚è€ƒIå¸§å’Œä¹‹å‰çš„På¸§ï¼ŒBå¸§å‚è€ƒä¹‹å‰å’Œä¹‹åçš„Iã€På¸§ã€‚ï¼‰<br>ç²¾å‡†ç©ºé™ï¼Ÿä¸å­˜åœ¨çš„ï¼â€”â€”è§†é¢‘ç¼–ç çš„ä¸€äº›å°çŸ¥è¯†</p>
<p>3ï¼‰FFmepgçš„æ»¤é•œæ¨¡å—AVFilter<br>AVFilteråº“æä¾›äº†ä¸€ä¸ªé€šç”¨çš„éŸ³é¢‘ã€è§†é¢‘ã€å­—å¹•ç­‰æ»¤é•œå¤„ç†æ¡†æ¶ã€‚åœ¨AVFilterä¸­ï¼Œæ»¤é•œæ¡†æ¶å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å’Œå¤šä¸ªè¾“å‡ºã€‚</p>
<p>4ï¼‰FFmpegçš„è§†é¢‘å›¾åƒè½¬æ¢è®¡ç®—æ¨¡å—swscale<br>swscaleæ¨¡å—æä¾›äº†é«˜çº§åˆ«çš„å›¾åƒè½¬æ¢APIï¼Œå®ƒèƒ½å¤Ÿå¯¹å›¾åƒè¿›è¡Œç¼©æ”¾å’Œåƒç´ æ ¼å¼è½¬æ¢ã€‚</p>
<p>5ï¼‰FFmpegçš„éŸ³é¢‘è½¬æ¢è®¡ç®—æ¨¡å—swresample<br>swresampleæä¾›äº†éŸ³é¢‘é‡é‡‡æ ·APIï¼Œæ”¯æŒéŸ³é¢‘é‡‡æ ·ã€éŸ³é¢‘é€šé“å¸ƒå±€ã€å¸ƒå±€è°ƒæ•´ã€‚</p>
<h3 id="è§†é¢‘å¤„ç†æµç¨‹"><a href="#è§†é¢‘å¤„ç†æµç¨‹" class="headerlink" title="è§†é¢‘å¤„ç†æµç¨‹"></a>è§†é¢‘å¤„ç†æµç¨‹</h3><p>ffmpegè°ƒç”¨æµç¨‹å›¾<br><img src="https://upload-images.jianshu.io/upload_images/11591878-810021da4c347e09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1067" alt="Alt text"></p>
<p>(source: <a href="https://www.jianshu.com/p/3c8c4a892f3c" target="_blank" rel="noopener">https://www.jianshu.com/p/3c8c4a892f3c</a>)</p>
<h3 id="å¸¸ç”¨æ»¤é•œ"><a href="#å¸¸ç”¨æ»¤é•œ" class="headerlink" title="å¸¸ç”¨æ»¤é•œ"></a>å¸¸ç”¨æ»¤é•œ</h3><p>å¸¸ç”¨çš„æ»¤é•œä¸­é‡ç‚¹çš„æ˜¯ï¼šscaleã€trimã€overlayã€yadifã€rotateã€movie<br>æ¯”å¦‚å¸¸ç”¨çš„scale å¯ä»¥ç”¨æ¥åšç¼©æ”¾ï¼Œtrimå¯ä»¥åšæ¯”è¾ƒç²¾ç¡®çš„å¸§çº§çš„å‰ªåˆ‡ï¼Œoverlayå¯ä»¥æ¥å®ç°è§†é¢‘æ··æµï¼Œç”»ä¸­ç”»æˆ–å¤šç”»é¢ç­‰å åŠ å¤„ç†ï¼Œrotateæ¥åšæ—‹è½¬ï¼Œmovieå¯ä»¥åŠ è½½ç¬¬ä¸‰æ–¹çš„è§†é¢‘ç­‰ç­‰ï¼Œyadifå¯ä»¥åœ¨æ‘„åƒæœºä¸Šåšéš”è¡Œæ‰«æï¼Œåœ¨PCç«¯çš„æ’­æ”¾å™¨å¯ä»¥åšå»äº¤é”™ã€‚å¦å¤–ï¼Œè¿˜æœ‰delogoã€cropã€colorkeyã€chromakeyã€zoompanï¼› delogoå¯ä»¥ç”¨æ¥æ¨¡ç³ŠåŒ–æŸä¸€åŒºåŸŸï¼Œcropç”¨äºå›¾åƒåŒºåŸŸå‰ªåˆ‡ï¼Œcolorkeyå’Œchromakeyæ˜¯ç”¨äºæŠ å›¾çš„ï¼Œchromakeyä»¥YUVè¾“å…¥ä¸ºä¸»ï¼Œcolorkeyä»¥RGBè¾“å…¥ä¸ºä¸»ï¼Œzoompanå¯ä»¥å°†å›¾åƒæ”¾å¤§ã€‚</p>
<h3 id="å•ä¸ªè¿‡æ»¤å™¨-AVFilter"><a href="#å•ä¸ªè¿‡æ»¤å™¨-AVFilter" class="headerlink" title="å•ä¸ªè¿‡æ»¤å™¨: AVFilter"></a>å•ä¸ªè¿‡æ»¤å™¨: AVFilter</h3><p>æ»¤é•œå<br>æ»¤é•œå‚æ•°ï¼šå½“æˆ‘ä»¬åœ¨ä½¿ç”¨æŸä¸€ç±»æ»¤é•œæ—¶ï¼Œéœ€è¦çŸ¥é“å¯¹åº”çš„å‚æ•°å¤§å°ï¼Œå¦‚ä½ç½®ï¼Œå®½é«˜ç­‰ã€‚<br>å†…ç½®å˜é‡ï¼šåœ¨ä½¿ç”¨æ»¤é•œæ—¶ï¼Œå¯ä»¥ç”¨åˆ°å®ƒçš„å¾ˆå¤šå†…ç½®å˜é‡ï¼Œå¦‚å¸§ç‡ï¼ŒPTSç­‰ï¼Œè¿™äº›å˜é‡å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œåœ¨è°ƒç”¨APIæ—¶ä¹Ÿä¼šç”¨åˆ°ã€‚<br>å‹ç¼©å‰ã€è§£å‹åçš„YUV/RGB/PCMæ•°æ®ï¼šå¯¹æ•°æ®è¿›è¡Œæ»¤é•œå¤„ç†æ—¶ä½¿ç”¨çš„éƒ½æ˜¯åŸå§‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æœªå‹ç¼©çš„æ•°æ®ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">AVFilter</span> &#123;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *name;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *description;</span><br><span class="line">    <span class="keyword">const</span> AVFilterPad *inputs;</span><br><span class="line">    <span class="keyword">const</span> AVFilterPad *outputs;</span><br><span class="line">    <span class="keyword">const</span> AVClass *priv_class;</span><br><span class="line">    <span class="keyword">int</span> flags;</span><br><span class="line">    <span class="keyword">int</span> (*preinit)(AVFilterContext *ctx);</span><br><span class="line">    <span class="keyword">int</span> (*init)(AVFilterContext *ctx);</span><br><span class="line">    <span class="keyword">int</span> (*init_dict)(AVFilterContext *ctx, AVDictionary **options);</span><br><span class="line">    <span class="keyword">void</span> (*uninit)(AVFilterContext *ctx);</span><br><span class="line">    <span class="keyword">int</span> (*query_formats)(AVFilterContext *);</span><br><span class="line">    <span class="keyword">int</span> priv_size;      </span><br><span class="line">    <span class="keyword">int</span> flags_internal; </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">AVFilter</span> *<span class="title">next</span>;</span></span><br><span class="line">    <span class="keyword">int</span> (*process_command)(AVFilterContext *, <span class="keyword">const</span> <span class="keyword">char</span> *cmd, <span class="keyword">const</span> <span class="keyword">char</span> *arg, <span class="keyword">char</span> *res, <span class="keyword">int</span> res_len, <span class="keyword">int</span> flags);</span><br><span class="line">    <span class="keyword">int</span> (*init_opaque)(AVFilterContext *ctx, <span class="keyword">void</span> *opaque);</span><br><span class="line">    <span class="keyword">int</span> (*activate)(AVFilterContext *ctx);</span><br><span class="line">&#125; AVFilter;</span><br></pre></td></tr></table></figure>

<h3 id="è¿‡æ»¤å™¨å›¾è°±"><a href="#è¿‡æ»¤å™¨å›¾è°±" class="headerlink" title="è¿‡æ»¤å™¨å›¾è°±"></a>è¿‡æ»¤å™¨å›¾è°±</h3><p>å†…éƒ¨ç»“æ„<br><img src="https://img2018.cnblogs.com/blog/421096/201812/421096-20181204223756753-1114531886.png" alt="Alt text"></p>
<p>è°ƒç”¨æµç¨‹å›¾<br>ç¤ºæ„å›¾<br><img src="https://img2018.cnblogs.com/blog/421096/201812/421096-20181204223757791-1107112009.png" alt="Alt text"></p>
<p>(source: <a href="https://www.cnblogs.com/TaigaCon/p/10067871.html" target="_blank" rel="noopener">https://www.cnblogs.com/TaigaCon/p/10067871.html</a>)</p>
<p>Filterçš„çº¿æ€§å±æ€§ï¼šæ»¤é•œæ˜¯ä¸€ä¸ªçº¿æ€§çš„å±æ€§ï¼Œæ˜¯ä¸€æ­¥æ¥ç€ä¸€æ­¥çš„å¾€ä¸‹èµ°çš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æœ‰å¤šçº¿ç¨‹çš„ï¼Œä½†æ˜¯å¤šçº¿ç¨‹çš„å®ç°ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œä¸€èˆ¬çš„å®ç°éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹æ¥çº¿æ€§å¤„ç†çš„ã€‚<br>çº¿æ€§å¤„ç†å›¾è§£çº¿æ€§å¤„ç†å›¾è§£<br><img src="https://mmbiz.qpic.cn/mmbiz_png/CZeKj44ymYaJoZC5alFOmeyMwusdcCIJzRz5xZnmIfia69BwhjrdbSwsBILrpPBTxj2tnbLqYic6eQ7DkMgO9TuA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="Alt text"></p>
<p>åŸå§‹æ•°æ®å¤„ç†åŸå§‹æ•°æ®å¤„ç†<br>æ»¤é•œçš„å¤„ç†éƒ½æ˜¯åŸºäºåŸå§‹æ•°æ®æ¥è¿›è¡Œçš„ï¼Œæ¯”å¦‚è§†é¢‘å›¾åƒçš„æ¯ä¸€å¸§ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬éŸ³é¢‘ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯ä¸€å¸§å¯ä»¥æœ‰å‰åçš„å¤šä¸ªå±‚ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸¤å±‚ï¼Œå½“æœ‰å¤šå±‚æ—¶ï¼Œå¦‚Frame1æ˜¯ä¸‰å±‚ï¼Œåˆ™å¯ä»¥å…ˆå¤„ç†å‰ä¸¤å±‚ï¼Œå¤„ç†ä¹‹ååˆå¹¶æˆä¸€å±‚ï¼Œå†è·Ÿå¦ä¸€å±‚ä¸€èµ·å»åšå¤„ç†ã€‚å½“å¤„ç†å®ŒFrame1åé€åˆ°ç¼–ç å™¨è¿›è¡Œç¼–ç ï¼Œå†ä¾æ¬¡å¤„ç†Frame2ã€Frame3ã€Frame4ï¼Œå¤„ç†å®Œåå‡é€åˆ°ç¼–ç å™¨è¿›è¡Œå‹ç¼©ç¼–ç ä¸ºå¦ä¸€ä¸ªæ ¼å¼ï¼Œæ¯”å¦‚H.264ã€‚<br><img src="https://mmbiz.qpic.cn/mmbiz_png/CZeKj44ymYaJoZC5alFOmeyMwusdcCIJauB4CiaIsSqzDyr2yicXiaqpIVhKgrmpB0kcoF2nmNc2dC9aktGHHEq8Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="Alt text"><br>(source: <a href="https://mp.weixin.qq.com/s/-oINjNhfYKtZUqljqd79Ww" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/-oINjNhfYKtZUqljqd79Ww</a>)</p>
<h3 id="å¤šè¾“å…¥æ»¤æ³¢åŒæ­¥æ–¹å¼ï¼ˆframesyncï¼‰"><a href="#å¤šè¾“å…¥æ»¤æ³¢åŒæ­¥æ–¹å¼ï¼ˆframesyncï¼‰" class="headerlink" title="å¤šè¾“å…¥æ»¤æ³¢åŒæ­¥æ–¹å¼ï¼ˆframesyncï¼‰"></a>å¤šè¾“å…¥æ»¤æ³¢åŒæ­¥æ–¹å¼ï¼ˆframesyncï¼‰</h3><p><img src="https://img2018.cnblogs.com/blog/421096/201812/421096-20181229044129723-1248213237.png" alt="Alt text"></p>
<h3 id="ç†è§£FFmpegæ»¤æ³¢å™¨å’Œæ»¤æ³¢å‡½æ•°"><a href="#ç†è§£FFmpegæ»¤æ³¢å™¨å’Œæ»¤æ³¢å‡½æ•°" class="headerlink" title="ç†è§£FFmpegæ»¤æ³¢å™¨å’Œæ»¤æ³¢å‡½æ•°:"></a>ç†è§£FFmpegæ»¤æ³¢å™¨å’Œæ»¤æ³¢å‡½æ•°:</h3><p>æ¨èé˜…è¯»æ–‡ç«  <a href="https://www.cnblogs.com/TaigaCon/p/10171464.html" target="_blank" rel="noopener">FFmpegå®šåˆ¶æ»¤æ³¢å™¨</a> äº†è§£FFmpegå†…æ»¤æ³¢å™¨ä¸¤ä¸ªé‡è¦çš„ç»“æ„ä½“AVFilterã€AVFilterPadå’Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–ä»¥åŠè°ƒç”¨æµç¨‹</p>
<h4 id="Filterçš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å¯¹åº”ä¸¤ç§ä¸åŒçš„æ»¤æ³¢å‡½æ•°æ¥å£ï¼š"><a href="#Filterçš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å¯¹åº”ä¸¤ç§ä¸åŒçš„æ»¤æ³¢å‡½æ•°æ¥å£ï¼š" class="headerlink" title="Filterçš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å¯¹åº”ä¸¤ç§ä¸åŒçš„æ»¤æ³¢å‡½æ•°æ¥å£ï¼š"></a>Filterçš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å¯¹åº”ä¸¤ç§ä¸åŒçš„æ»¤æ³¢å‡½æ•°æ¥å£ï¼š</h4><ul>
<li>å•è¾“å…¥ï¼šä¸€ä¸ªè¾“å…¥å‡†å¤‡å¥½å°±å¯ä»¥å¼€å§‹å¤„ç†ã€‚å•è¾“å…¥Filteråº”è¯¥å®ç° filter_frame()å‡½æ•°ï¼Œåœ¨filter_frame()ä¸­è°ƒç”¨ff_filter_frame()å°†frameæ¨åˆ°ä¸‹ä¸€ä¸ªfilterã€‚<ul>
<li>ç¤ºä¾‹: å¦‚split, cropã€‚</li>
<li>ä½¿ç”¨: filter_frameçš„è¾“å…¥å‚æ•°ä¸­åŒ…æ‹¬æ»¤æ³¢å®ä¾‹çš„inlinkä»¥åŠä»inlinkä¸Šæå–çš„frameï¼Œä¸€èˆ¬æ¥è¯´filter_frameä¼šå¯¹è¯¥frameè¿›è¡Œæ»¤æ³¢å¤„ç†ï¼Œç„¶åè°ƒç”¨ff_filter_frameå‘outlinkè¾“å‡ºæ»¤æ³¢åçš„å¸§ã€‚</li>
</ul>
</li>
<li>å¤šè¾“å…¥: ä¸€ä¸ªè¾“å…¥å‡†å¤‡å¥½è¿˜ä¸èƒ½å†³å®šè¾“å‡ºï¼Œè¦å…ˆç¼“å­˜ï¼Œç­‰åˆ°è¶³å¤Ÿçš„è¾“å…¥æ‰å¤„ç†ã€‚å¤šè¾“å…¥filteråº”è¯¥å®ç°activate()å‡½æ•°ï¼Œå‰å‡ æ¬¡activate()æ—¶ç¼“å­˜frameï¼Œæœ€åä¸€æ¬¡æ‰è°ƒç”¨ff_filter_frame()ã€‚<ul>
<li>ç¤ºä¾‹: overlayã€‚</li>
<li>ä½¿ç”¨:è·å–å‰é¢çš„æ»¤æ³¢å™¨å®ä¾‹è¾“å‡ºçš„å¸§ã€‚å…·ä½“æ“ä½œå°±æ˜¯è°ƒç”¨ff_inlink_consume_frameæ¥ä»inlinkè·å–å‰é¢æ»¤æ³¢å™¨å®ä¾‹è¾“å‡ºçš„å¸§ã€‚<br>å¦‚æœæ‰€éœ€è¦çš„å¸§æœªå‡†å¤‡å¥½ï¼Œåˆ™éœ€è¦é€šçŸ¥ç›¸åº”çš„æ»¤æ³¢å™¨å®ä¾‹ï¼Œè¡¨æ˜å½“å‰æ»¤æ³¢å™¨éœ€è¦å¸§ã€‚å…·ä½“æ“ä½œå°±æ˜¯è°ƒç”¨ff_inlink_request_frameæ¥è®¾ç½®inlinkä¸Šçš„frame_wanted_outï¼Œè¯¥å˜é‡å°±æ˜¯ç”¨äºè¡¨æ˜inlinkçš„ç›®æ ‡æ»¤æ³¢å™¨å®ä¾‹ï¼Œå³å½“å‰æ»¤æ³¢å™¨å®ä¾‹éœ€è¦å‰ä¸€ä¸ªæ»¤æ³¢å™¨å®ä¾‹è¾“å‡ºå¸§ã€‚<br>å¦‚æœæ‰€éœ€è¦çš„å¸§å·²å‡†å¤‡å¥½ï¼Œå°±å¯ä»¥æ‰§è¡Œæ»¤æ³¢æ“ä½œã€‚<br>å‘åé¢çš„æ»¤æ³¢å™¨å®ä¾‹è¾“å‡ºæ»¤æ³¢å®Œæˆçš„å¸§ã€‚å…·ä½“æ“ä½œå°±æ˜¯è°ƒç”¨ff_filter_frameæ¥å‘outlinkè¾“å‡ºå¸§ã€‚<br>V2.0ç‰ˆæœ¬åŠä¹‹å‰çš„ä»£ç é‡‡ç”¨å•è¾“å…¥æ¨¡å¼ï¼Œè¯»å–å•å¸§è¾“å…¥ç»“æœï¼Œåœ¨å¤„ç†å®Œæˆä¹‹åç›´æ¥è¾“å‡ºä¿®æ”¹åçš„ç”»é¢å¸§ï¼Œå› æ­¤æ»¤æ³¢å‡½æ•°ä½¿ç”¨çš„æ˜¯filter_frame.<br>v3.0ç‰ˆæœ¬å› ä¸ºåœ¨æŠ½å¸§çš„æ—¶å€™éœ€è¦å‚è€ƒç›¸é‚»å¸§çš„è¯†åˆ«ç»“æœï¼Œæ‰€ä»¥éœ€è¦å¯¹ç”»é¢å¸§è¿›è¡Œç¼“å­˜ï¼Œä½¿ç”¨çš„æ»¤æ³¢å‡½æ•°æ¥å£ä¸ºactivate.</li>
</ul>
</li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Alicia Luo</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://www.alicialuo.com/2021/02/26/FFmpeg_learning_materials/">https://www.alicialuo.com/2021/02/26/FFmpeg_learning_materials/</a></span>
                    </p>
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/FFmpeg/"># FFmpeg</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/02/28/DL_cpp_deployment/">Deployment of Deep Learning model in C++</a>
            
            
            <a class="next" rel="next" href="/2021/02/25/Python_C_API/">Implementation of Python/C interface(Python/Cæ··åˆç¼–ç¨‹æ¥å£è°ƒç ”)</a>
            
        </section>


    </article>
</div>

        </div>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<footer id="footer" class="footer">
    <div class="copyright">
        <p style="height:20px;margin:0">Â© Alicia Luo | ğŸ‘€<span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span></span> </p>
        <p style="height:10px;font-size:80%;margin:0">Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></p>
    </div>
</footer>

    </div>

<script type="text/javascript" color="0,0,0" opacity="0.7" zindex="-2" count="100" src="/js/canvas-nest.js"></script>
<!-- <script type="text/javascript" color="0,0,0" opacity='0.7' zIndex="-2" count="100" src="https://github.com/hustcc/canvas-nest.js/blob/master/dist/canvas-nest.js"></script> -->
</body>
</html>
